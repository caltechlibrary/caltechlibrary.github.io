<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Caltech Library's DLD Labs</title>
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" type="text/css" href="/css/code-blocks.css">
    <script type="module" src="/modules/copyToClipboard.js"></script>
    <link rel="alternate" type="application/rss+xml" title="Caltech Library, Digital Library Development posts" href="/rss.xml">
    <script type="module" src="https://media.library.caltech.edu/cl-webcomponents/cl-web-components.js"></script>
    <!-- BEGIN: Setup Opensearch Description Document -->
	<link rel="search" type="application/opensearchdescription+xml" href="https://caltechlibrary.github.io/osd.xml" title="Search DLD Labs">
    <!--   END: Setup Opensearch Description Document -->
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
  <li><a href="/">DLD Labs</a></li>
  <li><a href="https://library.caltech.edu/library/home">Caltech Library</a></li>
  <li><a href="https://library.caltech.edu/archives/home">Caltech Archives</a></li>
  <li><a href="https://feeds.library.caltech.edu">Library Feeds</a></li>
  <li><a href="https://github.com/caltechlibrary/">DLD @ GitHub</a></li>
  <li>&nbsp;</li>
  <li><a href="/search.html">Site Search</a></li>
</ul>
</nav>

<section>
<h1 id="opensearch-description-documents-what-why-and-how">Opensearch
Description Documents: What, Why and How</h1>
<p>By R. S. Doiel, 2025-08-11</p>
<p>With the steady declining most commercial search engines over the
last decade my interest in site specific search has been grown. When the
web was young search meant site search. Overtime search as a service
arrived where it is considered an integral part of the web. The trouble
now is that commercial search isn’t about finding the thing you are
looking forward it is about selling attention and survalience. While
systems like Google Scholar still exist the question that nags at me is
for how long? What are out options today?</p>
<p>Site search didn’t disappear. It lives in content management systems
like Drupal and WordPress. It lives in library systems like
ArchivesSpace and Invenio RDM. It isn’t the new hotness but it works
pretty good. As libraries and archives continue the trend of taking
advantage of static web site implementations site search can live there
too. This begs the question, how can we make it more convient than
maintaining a bookmark list and always going directly to the site to
retrieve results?</p>
<p>We’re in luck! An old solution to exposing site search in the web
browser remains supported today. <a
href="https://en.wikipedia.org/wiki/OpenSearch_(specification)"
title="this is about the Opensearch Description document to not the Amazon sponsored Open Source project">Opensearch
Description Documents</a> is a specification that dates back to 2005. It
is not a coinsidence that the Omnibox arrives by 2008. The humble URL
box is the thing we use to navigate the web. It’s the on ramp. It’s also
where search starts for most people. The specification for Opensearch
Description Documents is a specification to make that possible.</p>
<p>It is important not to confuse <strong>Opensearch Description
Document</strong> with OpenSearch the fork by Amazon of ElasticSearch.
It is a simple XML document that can be used by Firefox, Safari and
Chrome to include your site search as a search engine (NOTE: Safari and
Chrome browser make you jump through a few hoops before it sites along
side Google, DuckDuckGo and the others). The really nice thing about
take the effort with Safari and Chrome is that you don’t need to
navigate to the website to take advantage of site search. Anytime you
are in the URL box (Omnibox) it’s right there ready to be used.</p>
<p>There are three parts to the dance of making your URL Box (Omnibox)
gain first class status along side comercial search.</p>
<ol type="1">
<li>You need an Opensearch Description Document (XML file) on your
site</li>
<li>You need to include a link to it in the head element of your search
web page (or other HTML pages)</li>
<li>You need to have a search engine to link to that can response to a
URL and return results</li>
</ol>
<h2 id="what-does-the-opensearch-description-document-look-like">What
does the Opensearch Description Document Look Like?</h2>
<p>The Opensearch Description Document is a short XML document with a
few required fields. Here’s a short version.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&quot;1.0&quot;</span><span class="ot"> encoding=</span><span class="st">&quot;UTF-8&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">OpenSearchDescription</span><span class="ot"> xmlns=</span><span class="st">&quot;http://a9.com/-/spec/opensearch/1.1/&quot;</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">ShortName</span>&gt;DLDLabs&lt;/<span class="kw">ShortName</span>&gt;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">Description</span>&gt;Search Caltech Library DLD Labs&lt;/<span class="kw">Description</span>&gt;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">Url</span><span class="ot"> type=</span><span class="st">&quot;text/html&quot;</span><span class="ot"> method=</span><span class="st">&quot;get&quot;</span><span class="ot"> template=</span><span class="st">&quot;https://caltechlibrary.github.io/search.html?q={searchTerms}&quot;</span>/&gt;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">InputEncoding</span>&gt;UTF-8&lt;/<span class="kw">InputEncoding</span>&gt;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">Image</span><span class="ot"> height=</span><span class="st">&quot;16&quot;</span><span class="ot"> width=</span><span class="st">&quot;16&quot;</span>&gt;https://caltechlibrary.github.io/favicon.ico&lt;/<span class="kw">Image</span>&gt;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">OpenSearchDescription</span>&gt;</span></code></pre></div>
<p>The outer XML element is the <strong>OpenSearchDescription</strong>.
Inside it you include a <strong>ShortName</strong>,
<strong>Deescription</strong>, <strong>Url</strong>,
<strong>InputEncoding</strong> and <strong>Image</strong> elements. The
last two are optional but I think are helpful. In the DLD Labs website
I’ve called this document “osd.xml” but you can name it whatever you
like. The link element you include in the head element of HTML pages is
what lets the web browser know it is available.</p>
<dl>
<dt><strong>OpenSearchDescription</strong></dt>
<dd>
The outer XML element holding the details about your search service.
</dd>
<dt><strong>ShortName</strong></dt>
<dd>
This is a short, less than 14 alpha numeric characters used to refer to
your search service.
</dd>
<dt><strong>Description</strong></dt>
<dd>
This is an up to 1024 character description of your search service.
</dd>
<dt><strong>Url</strong></dt>
<dd>
This describes the URL template needed to form a search URL. The
<code>{searchTerms}</code> is replaced with the query terms taken from
the URL box or Omnibox
</dd>
<dt><strong>InputEncoding</strong></dt>
<dd>
This sets the character encoding your search engine supports, UTF-8 is
the likely choice you want.
</dd>
<dt><strong>Image</strong></dt>
<dd>
This is the image associated with your search. Browser may display it
when you URL Box/Omnibox is set to search your site.
</dd>
</dl>
<h2
id="how-do-i-link-your-opensearch-description-document-to-your-web-page">How
do I link your Opensearch Description Document to your web page?</h2>
<p>If you have an <strong>Opensearch Description Document</strong>
available you need to point to it from a web page. All you need is a
simple link element in the head of the HTML page. Here’s the link used
on the DLD Labs site.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">&quot;search&quot;</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;application/opensearchdescription+xml&quot;</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;https://caltechlibrary.github.io/osd.xml&quot;</span><span class="ot"> title</span><span class="op">=</span><span class="st">&quot;Search DLD Labs&quot;</span><span class="dt">&gt;</span></span></code></pre></div>
<p>In the link we use the “rel”, “type”, “href” and “title” attributes
to connect the page with the Opensearch Description Document (abbr.
OSD). Once the OSD docuemnt is linked it can be discovered by the web
browser. In this case it tells the browser the OSD document can be found
at “https://caltechlibrary.github.io/osd.xml”.</p>
<h3 id="trouble-shooting-osd">Trouble shooting OSD</h3>
<p>An important think to remember of the Opensearch Description Document
is that it is XML. XML, unlink HTML, isn’t forgiving. If you have a
mismatched quote or a type in an element name it’s not going to
work.</p>
<p>The Mozilla Developer Network maintains excellent documentation on
the specification at <a
href="https://developer.mozilla.org/en-US/docs/Web/XML/Guides/OpenSearch"
class="uri">https://developer.mozilla.org/en-US/docs/Web/XML/Guides/OpenSearch</a>.</p>
<h2 id="adding-your-site-search-to-your-web-browser">Adding your site
search to your web browser</h2>
<h3 id="firefox">Firefox</h3>
<p>Firefox works seemlessly with OSD documents. You land on a webpage
where it is linked in. If you clear the URL Box and pulldown the list of
available search engines, newly discovered on appear at the top.</p>
<figure>
<img src="FireFox_URL_Box.png"
alt="Picture of the pulldown for search choices" />
<figcaption aria-hidden="true">Picture of the pulldown for search
choices</figcaption>
</figure>
<p>The image on the left with the downward caret is the menu that
exposes the search options. Click on it and you’ll see the list. If you
see an icon with a plus symbol overlayed in the upper right of the icon
it’s a new search you can add to the ones available. Clicking on it will
add it as an option to your web browser.</p>
<p>You can also add a search engine by going to <a
href="about:preferences#search"
class="uri">about:preferences#search</a>, scroll down to Search
Shortcuts and press the “add” button. This will let you add the search
manually.</p>
<h3 id="safari">Safari</h3>
<p>Safari has locked down this feature but still supports it. Apple just
makes it hard to find and change it.</p>
<ol type="1">
<li>Open the URL of the page that links to the Opensearch Decription
Document</li>
<li>Go to the Safari menu, click on settings</li>
<li>Click on Search</li>
<li>Make sure “Enable Quick Website Search” is checked</li>
</ol>
<p>If this is enabled you can now type in the hostname of the website, a
space followed by your search terms. Bingo you’re now search the
website.</p>
<h3 id="chrome">Chrome</h3>
<p>Chrome requires the most steps to enable your site search. This is
not surprising given the parent company.</p>
<ol type="1">
<li>Open the URL of the page that links to the Opensearch Description
Document</li>
<li>Click on Chrome’s menu and open the settings</li>
<li>Click on Search Engine</li>
<li>Just below the box where you set your default search engine is a box
labeled “Manage search engines and site search”, click on it.</li>
<li>Scroll way down on the page and you should see the new site search
in the “Inactive Shortcuts” list. Click the button labeled “activate”
for your site search.</li>
</ol>
<p>The last step will move the site search list. There will be a pencil
icon on the right side. You can give it a shortcut name by clicking on
the pencil, e.g. “<span class="citation"
data-cites="dldlbs">@dldlbs</span>” is what I use for searching DLD Labs
site from Chrome’s Omnibox.</p>
<h2 id="integrating-site-search-for-static-websites">Integrating site
search for static websites</h2>
<p>If you have Solr, ElasticSearch, Drupal, WordPress, ArchivesSpace,
InvenioRDM or EPrints search is running on your server someplace. What
about your static website? Do you have to run a separate search service?
No unless your site has multiple hundreds of thousands of pages to
search.</p>
<p>With the rise in popularity of static websites since 2010s browser
side search has become an option. Around 2011 <a
href="https://github.com/olivernn">Oliver Nightingale</a> pioneered
browser side search with <a href="https://lunrjs.com">Lunrjs</a>. More
recently <a href="https://cloudcannon.com/">CloudCannon</a>, created an
Open Source tool called <a href="https://pagefind.app">PageFind</a>.
This takes the LunrJS approach and adds rockets. Lunrjs could support up
to about 10,000 pages before it really bogged down. Pagefind goes way
beyond that. PageFind can even integrated search indexes across multiple
website! Here’s an example of the MDN website’s search implemented with
PageFind, <a href="https://mdn.pagefind.app/"
class="uri">https://mdn.pagefind.app/</a>.</p>
<p>PageFind has good <a href="https://pagefind.app/docs">documents</a>
for setting up a simple search page. It works well. Open the URL of the
search page, you are presented with a search box, type in a search and
you get results. The problem is the page’s URL doesn’t let you go
straight to search results. There’s an easy fix for that. When the page
loads the same JavaScript you use to enable the search page to work can
also check the URL’s query parameters for a query field and search term.
Example <a
href="https://caltechlibrary.github.io/search.html?q=dataset%20web%20components"
class="uri">https://caltechlibrary.github.io/search.html?q=dataset%20web%20components</a>.
This has two benefits</p>
<ol type="1">
<li>You can use it as a pattern as a template in the Opensearch
Description Document in the <strong>Url</strong> element.</li>
<li>You can bookmark search results</li>
</ol>
<h3 id="setting-up-pagefind-to-support-url-search-queries">Setting up
PageFind to support URL search queries</h3>
<p>Basically want to implement two things beyond the default PageFind
example. We need to retrieve the query parameter. I’m using the field
“q” because that is a common idiom for most site search systems. If that
field is present and populated then we need to “triggerSearch” in the
PageFindUI object. The second thing is when we’re typing in the web form
the URL should update just before the search results are fetched. That
is done by adding a “processTerm” hook when we configure the PageFundUI
object.</p>
<p>Here’s a simple version of the JavaScript we run on DLD Lab’s
search.html page.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Import PageFindUI</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to extract query parameters from the URL</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getQueryParam</span>(name) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> urlParams <span class="op">=</span> <span class="kw">new</span> <span class="fu">URLSearchParams</span>(<span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">search</span>)<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> urlParams<span class="op">.</span><span class="fu">get</span>(name)<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Extract the query parameter</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> searchQuery <span class="op">=</span> <span class="fu">getQueryParam</span>(<span class="st">&#39;q&#39;</span>)<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Function to update the URL with the search query</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateURLWithQuery</span>(query) {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> newUrl <span class="op">=</span> <span class="kw">new</span> <span class="fu">URL</span>(<span class="bu">window</span><span class="op">.</span><span class="at">location</span><span class="op">.</span><span class="at">href</span>)<span class="op">;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  newUrl<span class="op">.</span><span class="at">searchParams</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;q&#39;</span><span class="op">,</span> query)<span class="op">;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">history</span><span class="op">.</span><span class="fu">pushState</span>({ <span class="dt">path</span><span class="op">:</span> newUrl<span class="op">.</span><span class="at">href</span> }<span class="op">,</span> <span class="st">&#39;&#39;</span><span class="op">,</span> newUrl<span class="op">.</span><span class="at">href</span>)<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">// When the page is fully loaded setup the PageFindUI object</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="bu">window</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> searchUI <span class="op">=</span> <span class="kw">new</span> <span class="fu">PagefindUI</span>({</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">element</span><span class="op">:</span> <span class="st">&quot;#search&quot;</span><span class="op">,</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">highlightParam</span><span class="op">:</span> <span class="st">&quot;highlight&quot;</span><span class="op">,</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">mergeIndex</span><span class="op">:</span> [</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>            {</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                <span class="dt">bundlePath</span><span class="op">:</span> <span class="st">&quot;https://caltechlibrary.github.io/pagefind&quot;</span><span class="op">,</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>                <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&quot;/&quot;</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">processTerm</span><span class="op">:</span> (term) <span class="kw">=&gt;</span> {</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>            <span class="fu">updateURLWithQuery</span>(term)<span class="op">;</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> term<span class="op">;</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (searchQuery) {</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>        searchUI<span class="op">.</span><span class="fu">triggerSearch</span>(searchQuery)<span class="op">;</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>If you wanted to integrate you’re own PageFind search that supports
query URL you could use this code but replace the “bundlePath” with the
URL to your website’s pagefind indexes. You can see the expanded version
of our implementation at <a
href="https://caltechlibrary.github.io/modules/search.js"
class="uri">https://caltechlibrary.github.io/modules/search.js</a>. In
our implementation we also support searching the documentation sites for
some of our projects.</p>
<h2 id="more-arguments-for-browser-side-search">More arguments for
browser side search</h2>
<p>When the search engine runs on the server you’re at the mercy of the
people who control the server. Searches are a treasure trove for the
survailance economy. With PageFind the search runs in your browser. It
only leaves your browser to select the next partial index needed. This
significantly reduces the exposed data. You might be able to infer a set
of search terms but you’re not going to see the specific search string
typed in.</p>
<h3 id="what-is-page-find-doing-differently">What is Page Find doing
differently?</h3>
<p>Pagefind, the command line program, is run after you stage your
website but before you plublish it. It crawls the HTML pages on disk and
extracts the content you identified to be in included in your search
indexes. PageFind, unlike Lunrjs, does not encode the index as JSON.
Instead is includes the indexes as a sequence of WASM (Web Assembly)
files. This allows for dense indexes. Another step that sets PageFind
apart is the indexes generated are partitioned. You don’t download all
indexes to the browser only the ones you need to based on the search
terms. When you stop typing for a moment PageFind JavaScript running in
your web browser figures out which indexes are useful next and
retrieves. Clever stuff.</p>
<p>When we add support for using a query URL PageFind only sends the
query on page load. This does mean you’re going to wait for the indexes
to be retrieved based on the completed query string. That delay is
noticable but I think a reasonable trade off.</p>
<h2 id="why-is-the-opensearch-description-document-important">Why is the
opensearch description document important?</h2>
<p>As researchers, archivist, librarians and users of the research
materials skipping the ad-tech of Google et el means smoother workflows
when looking things up on line. It also means websites that are focused
on our specific research interests can be used as a primary search
resource if they include the description of their site search. While
being able to type in the URL Box might seem like mearly a convience
it’s the small user interface improvement that when understood can
smooth out flow of retrieving research resources online. This is true
regardless of with or not the site is a “dynamic” website
(e.g. WordPress, RDM, ArchivesSpace) or a static one (e.g. “cell
atlas”).</p>
</section>

<footer-global rss="/rss.xml"></footer-global>


</body>
</html>
